#
# Cookbook Name:: backupninja
# Recipe:: default
#
# Copyright 2013, lostwebsite.net
#

# Simple recipe for off-site backups.  Creates an user which will
# receive the backup files. The backup files are put in the backup
# user home.

# Generate a random password for the user
::Chef::Recipe.send(:include, Opscode::OpenSSL::Password)

node.set_unless['backupninja']['server']['password'] = secure_password

# Create the user.
user node['backupninja']['server']['user'] do
  password node['backupninja']['server']['password']
  action :modify
end

